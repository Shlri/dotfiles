#!/bin/bash
# ~/.config/eww/scripts/brightness
# возвращает JSON: {"level": 75}

if ! command -v brightnessctl &>/dev/null; then
  echo '{"level":100}'
  exit 0
fi

CURRENT=$(brightnessctl get 2>/dev/null || echo "100")
MAX=$(brightnessctl max 2>/dev/null || echo "100")

if [ "$MAX" -eq 0 ]; then
  echo '{"level":100}'
  exit 0
fi

LEVEL=$((CURRENT * 100 / MAX))

echo "{\"level\":$LEVEL}"
